FROM kalilinux/kali-rolling

LABEL maintainer="PentestGPT"
LABEL description="Docker de Pentest com ferramentas de OSINT, Web, CMS, WAF e SSL"

ENV DEBIAN_FRONTEND=noninteractive

# Atualização do sistema
RUN apt update && apt upgrade -y

# Dependências básicas
RUN apt install -y \
    git \
    curl \
    wget \
    python3 \
    python3-pip \
    python3-venv \
    ruby \
    ruby-dev \
    build-essential \
    dnsutils \
    whois \
    nmap \
    dirb \
    nikto \
    wafw00f \
    whatweb \
    sslscan \
    wfuzz \
    dnsrecon \
    amap \
    uniscan \
    theharvester \
    metagoofil \
    xsser \
    wapiti \
    openssl \
    ca-certificates \
    && apt clean

# WPScan
RUN gem install wpscan

# Joomscan
RUN git clone https://github.com/rezasp/joomscan.git /opt/joomscan

# Droopescan
RUN pip3 install droopescan

# XSStrike
RUN git clone https://github.com/s0md3v/XSStrike.git /opt/XSStrike

# XSSPy
RUN git clone https://github.com/faizann24/XssPy.git /opt/XssPy

# A2SV (API Security Vulnerability Scanner)
RUN git clone https://github.com/telkomdev/a2sv.git /opt/a2sv \
    && pip3 install -r /opt/a2sv/requirements.txt

# SSLyze
RUN pip3 install sslyze

# Uniscan fix
RUN ln -s /usr/bin/perl /bin/perl

# Diretório de trabalho
WORKDIR /pentest

# Shell padrão
CMD ["/bin/bash"]

